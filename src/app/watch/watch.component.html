<div class="container">
    <div class="header">
        <div class="bg-default border-2">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 py-2">
                        <p class="text-white" style="text-align: right;">Connection status: {{ globals.status }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div>
        <br /><br />
        <div class="row">
            <div class="col-md-12">
                <div class="card card-lift--hover shadow border-0 text-center">
                    <div class="card-header py-2 bg-info">
                        <h6 class="text-white text-uppercase">IPFS Directory</h6>
                    </div>
                    <div class="card-body bg-default">
                        <app-watch-file-list></app-watch-file-list>
                    </div>
                </div>
            </div>
        </div>
        <div class="row justify-content-center py-5">
            <div class="col-md-12">
                <div class="card card-lift--hover shadow border-0 text-center">
                    <div class="card-header py-2 bg-info">
                        <h6 class="text-white text-uppercase">Decrypt File</h6>
                    </div>
                    <div class="card-body py-2 bg-secondary">
                        <div class="alert alert-default" style="text-align: center;" role="alert">
                            <strong class="text-bold text-white">If the files are encrypted, you need to request a key from the streamer</strong>
                        </div>
                        <form>
                            <div class="form-group">
                                <label for="secretKeyInput">Insert secret</label>
                                <input #secretKeyInput type="text" class="form-control" id="secretKeyInput" aria-describedby="Secret key input" placeholder="Secret key" />
                                <small id="secretKeyInputHelp" class="form-text text-muted">Auto-fetch from your student smart contract is not yet available</small>
                                <br />
                                <label for="fileInput">URL of file</label>
                                <input #fileInput type="text" class="form-control" id="fileInput" aria-describedby="Secret key input" placeholder="URL" />
                                <small id="filetHelp" class="form-text text-muted">Copy link location above and paste here</small>
                            </div>
                        </form>
                        <button class="btn btn-success btn-fab btn-icon btn-round l-2" (click)="decrypt(secretKeyInput.value, fileInput.value)">Decrypt File</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<jw-modal id="view-file">
    <div class="row justify-content-center">
        <div class="col-md-12">
            <div class="card card-lift--hover shadow border-0 text-center">
                <div class="card-header py-2 bg-info">
                    <h6 class="text-white text-uppercase">View file</h6>
                </div>
                <div class="card-body py-2 bg-secondary">
                    <div id="fileContents"><div id="child"></div></div>
                </div>
                <div class="card-footer py-2 bg-info">
                    <button class="btn btn-secondary btn-fab btn-icon btn-round m-2" (click)="closeModal('view-file')">close</button>
                </div>
            </div>
        </div>
    </div>
</jw-modal>
